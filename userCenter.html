<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>用户中心 - 冷笑话乐园</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Microsoft YaHei", sans-serif; }
        body { background-color: #f5f5f5; padding: 30px; }
        .back-btn {
            display: inline-block;
            padding: 10px 20px;
            background-color: #222;
            color: #fff;
            text-decoration: none;
            border-radius: 6px;
            margin-bottom: 30px;
        }
        .back-btn:hover { background-color: #444; }
        .user-center {
            max-width: 800px;
            margin: 0 auto;
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .user-info { margin-bottom: 40px; padding-bottom: 20px; border-bottom: 1px solid #eee; }
        .user-info h2 { font-size: 24px; color: #222; margin-bottom: 10px; }
        .user-info p { font-size: 16px; color: #666; }
        /* 标签页按钮 */
        .tab-buttons { display: flex; gap: 20px; margin-bottom: 30px; }
        .tab-btn {
            padding: 10px 20px;
            background: #eee;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }
        .tab-btn.active { background: #222; color: #fff; }
        /* 标签页内容 */
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        /* 笑话记录项 */
        .joke-record {
            padding: 15px;
            border-bottom: 1px solid #eee;
            margin-bottom: 15px;
        }
        .joke-record p { font-size: 18px; color: #222; margin-bottom: 10px; }
        .joke-record .type-tag {
            display: inline-block;
            padding: 3px 8px;
            background: #ffd700;
            color: #222;
            border-radius: 3px;
            font-size: 14px;
        }
        /* 无记录提示 */
        .no-record { text-align: center; padding: 50px; color: #999; font-size: 18px; }
        /* 退出登录按钮 */
        .logout-btn {
            margin-top: 30px;
            padding: 10px 20px;
            background: #ff4444;
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
        }
        .logout-btn:hover { background: #ff6666; }
    </style>
</head>
<body>
    <a href="index.html" class="back-btn">返回主界面</a>
    <div class="user-center">
        <div class="user-info">
            <h2 id="username">未登录</h2>
            <p id="regTime">请登录查看个人信息</p>
        </div>

        <div class="tab-buttons">
            <button class="tab-btn active" onclick="switchTab('collect')">我的收藏</button>
            <button class="tab-btn" onclick="switchTab('like')">我的点赞</button>
            <button class="tab-btn" onclick="switchTab('dislike')">不喜欢的笑话</button>
        </div>

        <!-- 收藏列表 -->
        <div class="tab-content active" id="collectTab">
            <div id="collectList" class="no-record">暂无收藏</div>
        </div>

        <!-- 点赞列表 -->
        <div class="tab-content" id="likeTab">
            <div id="likeList" class="no-record">暂无点赞</div>
        </div>

        <!-- 不喜欢列表 -->
        <div class="tab-content" id="dislikeTab">
            <div id="dislikeList" class="no-record">暂无不喜欢的笑话</div>
        </div>

        <button class="logout-btn" onclick="logout()">退出登录</button>
    </div>

    <script src="common.js"></script>
    <script>
        // 关键：笑话ID和内容的映射表（必须和所有笑话页的data-joke-id对应）
        const jokeDataMap = {
            // 问答
            "joke1-1":`question: "奥特曼打一明星",
                answer: "打死了"`,
            "joke1-2":`question: 小明有一天吃错了东西，胃特别特别疼，到晚上难以入睡,
                然后他就对着肚子说：胃啊，求求你别疼了，我好难受…
                你知道他的胃说了什么吗？,
                answer: 他的胃说：我不叫胃，我叫楚雨荨`,
            "joke1-3": `question: "什么东西是蓝色的 闻起来像红油漆",
                answer: "蓝油漆"`,
            "joke1-4":`question: @一个小乖: 我目前知道最最最好笑的冷笑话，
                我和我妹都笑到肚子痛的，
                就是有一只鸟被猎人打伤了翅膀但是还是飞越了大西洋，为什么,
                answer: 因为它很坚强`,
            "joke1-5": `question: 埃及的法老死了，所有人永驻青春了，谁知道是为什么,
                answer: 因为所有人都没法老了`,
            "joke1-6": `question: 什么东西会跑，会叫，爬到人身上人会死,
                answer: 卡车`,
            "joke1-7": `question: 为什么两头牛走到岔路口 突然不叫了,
                answer: 道不同，不相为哞`,
            "joke1-8": `question: 小明和他的朋友一起去看医生，为什么小明最后自己走了,
                answer: 因为朋友医生一起走`,
            "joke1-9": `question: 什么东西有22条腿 毛绒绒的 还会下蛋,
                answer: 五张半台球桌`,
            "joke1-10": `question: 有个人生病了去打点滴 他为什么对着点滴笑？,
                answer: 因为他笑点低`,
     //句子
            "joke2-1":`小明和小红约好每天放学在后山碰头，后来他们都成了脑震荡`,             
            "joke2-2":`燕子在树上叽叽喳喳叫了十五分钟
树枝上的叶子终于受不了了
“咏春？”叶问`,            
            "joke2-3":`我的压箱底笑话 乌龟受伤了要蜗牛给它买药
                 等半天蜗牛还没回来 乌龟说这个蜗牛慢死了 再不回来我都要死了 
                这时门外传来蜗牛的声音 你再说我我就不去了`,            
            "joke2-4":`第二天乌龟吃一堑长一智，觉得蜗牛不靠谱，
                于是喊了蜈蚣帮他买药，又等了半天也是没回来，
                终破口大骂：这帮玩意没一个靠谱的！
                这时门口传来蜈蚣的声音：催什么催！老子鞋还没穿完呢`,            
            "joke2-5":`牛说：你饿不饿 晚饭吃什么？
                          马说：唐 韩愈`,            
            "joke2-6":`鸡的反义词是什么”
“鸭”
“不对，是狼”
“？”
“因为鸡的叫声是咕咕哒，反过来是哒咕咕，大哥哥是狼`,
            "joke3-1":`@iamxixi_: 从小听的
一群人去尿检，端好尿杯在排队，医生是个四川人，他点名：“王尚举”
王尚举没听见，所有人把尿杯举起来
“王尚举”他还是没听见，所有人很疑惑但还是举到了面前
“王尚举”他依旧没听见，所有人还是听话的举到了头顶
“王尚举！”王尚举终于听见了
“到！！！！”所有人听话的从头顶倒下来了`,            
            "joke3-2":`去医院，医生开药，问：“这个药你过不过敏？”患者答："我不过敏我过吞。"`,            
            "joke4-1":`狄仁杰对妻子说，这世道为世不仁，
                为什么我的名字里带仁，妻子回答道，
                你想问什么？如果我的名字里不带仁，就叫狄杰，如果我是狄杰你会爱我吗？`,
            "joke4-2":`去医院，医生开药，问：“这个药你过不过敏？”患者答："我不过敏我过吞。"`,
            "joke4-3":`冰块的愿望是什么  是退伍 
因为当冰太久了`,
            "joke4-4":`一个患者面部有点感染
他说前几天本来是个痘痘
医生问：你挤过吗？（四川话）
患者懵了，缓缓的说：我只有一个妈`,
            "joke4-5":`红孩儿游山归来
牛魔王：吾儿此游累么
红孩儿:My name is redbaby`,
            "joke5-1":`初中反复被一个冷笑话笑死“小明换了个发型，
                大家都嘲笑他的头像风筝，他就去告老师，老师看了看说你别说，
                还真的很像风筝啊！
                小明就伤心的哭了，哭着跑回家找妈妈，跑着跑着就飞起来了`,
            "joke5-2":`@小红豆21 12/12: 这个是我小学的时候看到的，
                记了十来年了，一直没忘，从前有个叫阿爽的人去世了，
                出殡那天他的家人痛哭，边哭边喊，爽啊爽！爽啊爽！
                过路的人问他们爽什么？他家人说爽死了！爽死了！`,
            "joke5-3":`@小琉骑士: 被株连九族的人吃的最后一顿是什么？
@小琉骑士: 族光晚餐`,
            "joke5-4":`“肚子好痛”
“是例假，横扫饥饿，做回自己”`,
        };

        // 页面加载时初始化
        window.onload = function() {
            renderUserInfo();
            renderAllTabs();
        };

        // 渲染用户信息
        function renderUserInfo() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            const usernameEl = document.getElementById('username');
            const regTimeEl = document.getElementById('regTime');

            if (currentUser) {
                usernameEl.textContent = `欢迎回来，${currentUser.username}`;
                regTimeEl.textContent = `注册时间：${currentUser.regTime}`;
            } else {
                usernameEl.textContent = "未登录";
                regTimeEl.textContent = "请登录查看个人信息和互动记录";
            }
        }

        // 切换标签页（收藏/点赞/不喜欢）
        function switchTab(tabType) {
            // 切换按钮样式
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.toggle('active', btn.onclick.toString().includes(tabType));
            });
            // 切换内容显示
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.toggle('active', content.id === `${tabType}Tab`);
            });
        }

        // 渲染所有标签页内容
        function renderAllTabs() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return; // 未登录，不渲染

            // 获取各类互动记录
            const collectIds = getUserInteractionList('collect');
            const likeIds = getUserInteractionList('like');
            const dislikeIds = getUserInteractionList('dislike');

            // 渲染对应列表
            renderTabList('collectList', collectIds, '收藏');
            renderTabList('likeList', likeIds, '点赞');
            renderTabList('dislikeList', dislikeIds, '不喜欢');
        }

        // 渲染单个标签页的笑话列表
// 渲染单个标签页的笑话列表
        function renderTabList(listId, jokeIds, typeText) {
            const listEl = document.getElementById(listId);
            if (jokeIds.length === 0) {
        listEl.innerHTML = `<div class="no-record">暂无${typeText}的笑话</div>`;
            return;
        }

        let html = '';  // 移到函数内部
        jokeIds.forEach(jokeId => {
            const jokeContent = jokeDataMap[jokeId] || "该笑话已更新";
        // 补充 html += 进行字符串拼接
            html += `
                <div class="joke-record">
                    <p>${jokeContent}</p>
                    <span class="type-tag">${typeText}</span>
                </div>
            `;
        });
        listEl.innerHTML = html;  // 移到函数内部
    } 

        // 退出登录
        function logout() {
            localStorage.removeItem('currentUser');
            alert('已退出登录');
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>